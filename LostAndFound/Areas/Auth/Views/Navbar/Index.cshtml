
@model NavbarViewModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

    int slNo = 1;
}

<br />
<section>
    <div class="card">
        <div class="card-header">
            <h5 class="font-weight-bold" style="color:black">Create NabBar</h5>
        </div>
        <div class="card-body">
            <form id="myForm">
                <div class="row">
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="nameOption" class="col-sm-4 col-form-label">Name Option <span style="float:right; color:red" class="redStar">*</span></label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="nameOption" name="nameOption" data-parsley-required="true">
                                <input type="hidden" name="Id" id="Id" value="0" />
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="form-group row">
                            <label for="nameOptionBangla" class="col-sm-4 col-form-label">Name Option (Bangla) </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="nameOptionBangla" name="nameOptionBangla">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="area" class="col-sm-4 col-form-label">Area </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="area" name="area">
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="form-group row">
                            <label for="controller" class="col-sm-4 col-form-label">Controller </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="controller" name="controller">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="action" class="col-sm-4 col-form-label">Action </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="action" name="action">
                            </div>
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="form-group row">
                            <label for="imageClass" class="col-sm-4 col-form-label">Image Class </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="imageClass" name="imageClass">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="activeLi" class="col-sm-4 col-form-label">Active Li </label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control" id="activeLi" name="activeLi">
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="isParent" class="col-sm-4 col-form-label">Category <span style="float:right; color:red" class="redStar">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="isParent" name="isParent" data-parsley-required="true">
                                    <option value="">Select</option>
                                    <option value="1">Child</option>
                                    <option value="0">Parent</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="status" class="col-sm-4 col-form-label">Status <span style="float:right; color:red" class="redStar">*</span></label>
                            <div class="col-sm-8">
                                <select class="form-control" id="status" name="status" data-parsley-required="true">
                                    <option value="True">Active</option>
                                    <option value="False">Inactive</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="parentID" class="col-sm-4 col-form-label">Parent ID </label>
                            <div class="col-sm-8">
                                <select class="form-control" id="parentID" name="parentID">
                                    <option value="0">Select</option>
                                    @foreach (var item in Model.navbars)
                                    {
                                        <option value="@item.Id">@item.nameOption</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="form-group row">
                            <label for="displayOrder" class="col-sm-4 col-form-label">Display Order </label>
                            <div class="col-sm-8">
                                <input data-parsley-type="number" class="form-control" id="displayOrder" name="displayOrder">
                            </div>
                        </div>
                    </div>
                </div>

                <hr />
                <button type="button" onclick="myFormSubmit()" class="btn btn-success" style="float:right; margin-top:5px;"><i class="fas fa-save"></i></button>

            </form>
        </div>
    </div>
</section>

<br />
<section>
    <div class="card">
        <div class="card-header">
            <h5 class="font-weight-bold" style="color:black">Navbar List</h5>
        </div>
        <div class="card-body">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>#SL</th>
                        <th>Area</th>
                        <th>Controller</th>
                        <th>Action</th>
                        <th>Parent Id</th>
                        <th>Is Parent</th>
                        <th>Display Order</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var data in Model.navbars)
                    {
                        <tr>
                            <td>@slNo</td>
                            <td>@data.area</td>
                            <td>@data.controller</td>
                            <td>@data.nameOption</td>
                            <td>@data.parentID</td>
                            <td>@data.isParent</td>
                            <td>@data.displayOrder</td>
                            <td></td>
                        </tr>
                        slNo++;
                    }
                </tbody>
            </table>
        </div>
    </div>
</section>

@section Scripts{ 

    <script>
        $(documet).ready(function () {

        });

        function myFormSubmit() {

            var name = $("#nameOption").val();
            var isParent = $("#isParent").val();

            var myData = $("#myForm").serialize();

            if (name == '', name == null) {
                swal({
                    title: 'Invalid Input', text: 'Please enter item option name !!!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });

                return false;
            }
            else if (isParent == '', isParent == null) {
                swal({
                    title: 'Invalid Input', text: 'Please select category type !!!', type: 'warning', confirmButtonColor: '#3085d6', confirmButtonText: 'OK!'
                });

                return false;
            }

            swal({
                title: 'Are you sure?', text: 'Do you want save this record!', type: 'warning', showCancelButton: true, confirmButtonColor: '#3085d6', cancelButtonColor: '#d33', confirmButtonText: 'Yes, Save it!'
            }).then(function () {

                $.ajax({

                    url: "/Auth/Navbar/Index",
                    type: "post",
                    data: myData,
                    success: function (response) {

                        if (response == "success") {

                            swal({
                                title: 'Success!', text: 'Saved Successfully!', type: 'success', showCancelButton: false, confirmButtonColor: '#3085d6', confirmButtonText: 'Ok!',
                            }).then(function () {
                                window.location.href = "/Auth/Navbar/Index";
                            });
                        }
                        else {
                            swal('Warning!', 'Unable to save!', 'warning');
                        }
                    }
                });
            });           

        }

    </script>
}